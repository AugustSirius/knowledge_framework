# 集合、关系与函数
*数学结构的基石*

数学有"基础"意味着什么？十九世纪末，数学家们发现了一个惊人的答案：几乎所有数学都可以从一个原始概念构建——**集合**。

集合只是"被视为单一实体的对象汇集"。这个概念简单到接近平凡，但从它出发，数学家构建了数、函数、几何空间、概率测度，以及现代数学的全部工具。为什么需要这样一个基础？因为十九世纪揭示了直觉性的数学推理可能导致矛盾。集合论为数学提供了清晰的"对象定义"和"合法运算规则"，就像逻辑为推理提供了规则一样。

理解集合、关系与函数，就是理解数学书写的语法。

## 什么是集合？

**集合**是由不同对象组成的汇集，被视为单一实体。集合中的对象称为其**元素**。我们用 $a \in A$ 表示 $a$ 是集合 $A$ 的元素。

集合可以**列举**元素：
$$A = \{1, 2, 3\} \quad B = \{\text{红}, \text{蓝}, \text{绿}\}$$

也可以**描述**性质：
$$C = \{x : x \text{ 是小于20的素数}\} = \{2, 3, 5, 7, 11, 13, 17, 19\}$$

集合有三个关键特征：

**顺序无关紧要。** $\{1, 2, 3\}$ 与 $\{3, 1, 2\}$ 是同一个集合。

**重复无关紧要。** $\{1, 1, 2\}$ 与 $\{1, 2\}$ 相同。一个对象要么在集合中，要么不在。

**存在空集。** 没有任何元素的唯一集合称为**空集**，记作 $\emptyset$。它像算术中的零——是某些运算的单位元，也是递归定义的基础。

### 子集与幂集

若 $A$ 的每个元素都是 $B$ 的元素，则 $A$ 是 $B$ 的**子集**，记作 $A \subseteq B$。

两个集合**相等**当且仅当它们互为子集：$A = B$ 当且仅当 $A \subseteq B$ 且 $B \subseteq A$。这是数学中最常用的证明技巧之一。

**幂集** $\mathcal{P}(A)$ 是 $A$ 的所有子集构成的集合。例如：
$$\mathcal{P}(\{1, 2\}) = \{\emptyset, \{1\}, \{2\}, \{1, 2\}\}$$

如果 $A$ 有 $n$ 个元素，则 $\mathcal{P}(A)$ 有 $2^n$ 个元素——对每个元素，我们独立选择"包含"或"不包含"。

## 集合的运算

数学的强大来自运算——将对象组合产生新对象。集合支持三个基本运算。

### 并集与交集

**并集** $A \cup B$ 是属于 $A$ 或 $B$（或两者）的元素：
$$A \cup B = \{x : x \in A \text{ 或 } x \in B\}$$

**交集** $A \cap B$ 是同时属于 $A$ 和 $B$ 的元素：
$$A \cap B = \{x : x \in A \text{ 且 } x \in B\}$$

例如，若 $A = \{1, 2, 3\}$，$B = \{2, 3, 4\}$：
- $A \cup B = \{1, 2, 3, 4\}$
- $A \cap B = \{2, 3\}$

这些运算对应于逻辑运算：并集对应OR，交集对应AND。集合论为逻辑运算提供了具体实现。

若 $A \cap B = \emptyset$，则称 $A$ 和 $B$ **不相交**。

### 笛卡尔积

**笛卡尔积** $A \times B$ 是所有有序对 $(a, b)$ 的集合，其中 $a \in A$，$b \in B$：
$$A \times B = \{(a, b) : a \in A \text{ 且 } b \in B\}$$

与集合元素不同，有序对是有顺序的：$(1, 2) \neq (2, 1)$。若 $A = \{1, 2\}$，$B = \{a, b\}$：
$$A \times B = \{(1, a), (1, b), (2, a), (2, b)\}$$

这个名称纪念Descartes——他用坐标对表示平面上的点。笛卡尔积形式化了这个思想：平面上的点就是 $\mathbb{R} \times \mathbb{R}$ 的元素。

若 $|A| = m$，$|B| = n$，则 $|A \times B| = mn$。

## 关系：形式化连接

从集合 $A$ 到集合 $B$ 的**关系**是 $A \times B$ 的子集。若 $(a, b) \in R$，我们说 $a$ 与 $b$ 由关系 $R$ 相关，写作 $aRb$。

这捕捉了"哪些对象对以某种方式相连"。例如：
- 整数上的"小于"：$R = \{(a, b) \in \mathbb{Z} \times \mathbb{Z} : a < b\}$
- "是...的因子"：$\{(a, b) : a \text{ 整除 } b\}$
- 网页之间的"链接到"

单个集合上的关系——$A \times A$ 的子集——称为 $A$ **上的**关系，可以具有特殊性质。

### 等价关系

既是**自反的**（每个元素与自身相关）、又是**对称的**（$aRb$ 蕴涵 $bRa$）、又是**传递的**（$aRb$ 且 $bRc$ 蕴涵 $aRc$）的关系称为**等价关系**。

等价关系形式化了"在特定方面相同"的概念。例如：

**模 n 同余**：整数 $a$ 和 $b$ 模 $n$ 等价，如果 $n$ 整除 $(a - b)$。模3下，7和13是等价的（都余1）。

**三角形相似**：一个可以缩放成与另一个相同。

等价关系将集合 $A$ 划分成不相交的**等价类**。元素 $a$ 的等价类是：
$$[a] = \{x \in A : x \sim a\}$$

每个元素恰好属于一个等价类。所有等价类的集合称为**商集** $A/{\sim}$。

这是深刻的构造：等价关系让我们"商掉"无关的差异。当我们处理模5的整数时，实际上在商集 $\mathbb{Z}/{\equiv_5}$ 中工作，将所有余数相同的整数视为一个。

### 序关系

既是自反的、又是**反对称的**（$aRb$ 且 $bRa$ 蕴涵 $a = b$）、又是传递的关系称为**偏序**。如果任意两个元素都可比较，则称为**全序**。

- 实数上的"小于或等于"是全序
- 正整数上的"整除"是偏序（2不整除3，3也不整除2）
- 任意集合的幂集上的"是...的子集"是偏序

序关系以可遍历、可优化的方式组织集合。有先决条件的任务形成偏序，任何有效调度都必须尊重这个序。

## 函数：有方向的关系

从集合 $A$ 到集合 $B$ 的**函数** $f: A \to B$ 是一个关系，它为 $A$ 的每个元素恰好指派 $B$ 的一个元素。

我们用 $f(a) = b$ 表示 $f$ 将 $a$ 关联到 $b$。集合 $A$ 是 $f$ 的**定义域**，$B$ 是**陪域**。$f$ 实际取到的所有值——$\{f(a) : a \in A\}$——是 $f$ 的**值域**。

函数的定义性特征是**单值性**：每个输入恰好产生一个输出。

### 为什么区分陪域和值域？

**陪域**是我们声称函数"映射到"的集合，**值域**是实际达到的值。例如：
- $f: \mathbb{R} \to \mathbb{R}$，$f(x) = x^2$：陪域是 $\mathbb{R}$，值域是 $[0, \infty)$

这个区分很重要。陪域是函数"签名"的一部分——它告诉我们这个函数"属于哪一类"。值域是运行时的实际结果。

### 函数的类型

**单射（一一的）**：不同的输入给出不同的输出。若 $f(a_1) = f(a_2)$，则 $a_1 = a_2$。
- $f(x) = 2x$ 是单射
- $f(x) = x^2$ 不是（$f(-2) = f(2)$）

**满射（映上的）**：陪域的每个元素都被某个输入达到。对每个 $b \in B$，存在 $a \in A$ 使得 $f(a) = b$。
- $f: \mathbb{R} \to \mathbb{R}$，$f(x) = x^3$ 是满射
- $f(x) = x^2$ 不是（没有实数的平方是 $-1$）

**双射**：既是单射又是满射。陪域的每个元素恰好被定义域的一个元素达到。双射建立完美的一一对应。

**为什么这些分类重要？** 它们决定了哪些运算有意义：
- 只有双射才有真正的逆
- 只有单射才保持元素的可区分性
- 只有满射才能在某种意义上被"反转"

### 复合与逆

给定 $f: A \to B$ 和 $g: B \to C$，它们的**复合** $g \circ f: A \to C$ 定义为：
$$(g \circ f)(a) = g(f(a))$$

注意顺序：先应用 $f$，再应用 $g$。

双射 $f: A \to B$ 有**逆函数** $f^{-1}: B \to A$，满足：
$$f^{-1} \circ f = \text{id}_A \quad \text{且} \quad f \circ f^{-1} = \text{id}_B$$

逆"撤销" $f$ 的作用。这在编程中至关重要：序列化和反序列化应该形成双射，加密和解密必须如此。

## 基数：无穷有多大？

如果两个集合之间存在双射，则它们具有相同的**基数**。这个定义对有限集和无限集都适用。

对有限集，基数就是元素个数。但对无限集，这个定义揭示了惊人的事实。

考虑自然数 $\mathbb{N} = \{0, 1, 2, 3, \ldots\}$ 和偶自然数 $E = \{0, 2, 4, 6, \ldots\}$。直觉上，自然数"更多"（偶数是真子集）。但存在双射 $f(n) = 2n$——每个自然数映射到唯一的偶数，且恰好达到每个偶数。

因此 $|\mathbb{N}| = |E|$。一个无限集可以与其真子集具有相同基数。事实上，这正是无限集的定义性特征。

### 可数与不可数

如果一个集合与 $\mathbb{N}$ 具有相同基数，则称其为**可数无穷的**。这样的集合可以被"列出"。

也许令人惊讶，许多看似"更大"的集合是可数的：
- 整数 $\mathbb{Z}$（列出为：$0, 1, -1, 2, -2, 3, -3, \ldots$）
- 有理数 $\mathbb{Q}$（通过巧妙的对角线方法）
- 所有计算机程序的集合

如果一个集合是无穷的但不可数，则称其为**不可数的**。Cantor的对角线论证证明了实数 $\mathbb{R}$ 是不可数的。

论证思路：假设我们有0到1之间实数的完整列表。将每个实数写成无穷小数。构造一个新数，其第 $n$ 位与列表第 $n$ 个数的第 $n$ 位不同。这个新数与列表上每个数都不同，所以列表不完整。矛盾。

不可数集的存在意味着**无穷有不同的大小**。$\mathbb{N}$ 的基数 $\aleph_0$ 是最小的无穷基数。$\mathbb{R}$ 的基数 $\mathfrak{c}$ 严格更大。

### Cantor定理

对任意集合 $A$，幂集 $\mathcal{P}(A)$ 的基数严格大于 $A$：$|A| < |\mathcal{P}(A)|$。

证明思路：设 $f: A \to \mathcal{P}(A)$ 是任意函数。考虑集合 $D = \{a \in A : a \notin f(a)\}$——不在自己像中的元素。这个 $D$ 不可能等于任何 $f(a)$（若 $a \in D$，则 $a \notin f(a)$；若 $a \notin D$，则 $a \in f(a)$）。所以 $f$ 不是满射，不存在双射。

这个论证表明**不存在最大的无穷**：从任何无穷集出发，我们都能构造严格更大的集合。

## 为什么需要公理化？

集合作为"任意汇集"的直觉概念会导致悖论。最著名的是**Russell悖论**：考虑"所有不包含自身的集合"构成的集合 $R = \{x : x \notin x\}$。$R \in R$ 吗？两种回答都导致矛盾。

为了避免这类矛盾，现代数学在**公理化集合论**的框架内工作。标准基础是带选择公理的Zermelo-Fraenkel集合论（ZFC），它仔细限制了哪些集合构造是合法的。

### 选择公理

**选择公理**说：对于任意非空集合的汇集，存在一个从每个集合中选取一个元素的函数。

它看起来显然（当然我们可以选！），但有违反直觉的后果（如Banach-Tarski悖论——一个球可以分解重组成两个同样大的球）。

许多重要定理需要选择公理：每个向量空间有一组基，非空集合的积是非空的。但一些数学家避免使用它，因为它是非构造性的——证明存在而不给出构造。

即使在ZFC内部，某些问题仍是**不可判定的**。**连续统假设**（$|\mathbb{N}|$ 和 $|\mathbb{R}|$ 之间不存在中间基数）既不能证明也不能否证。这联系到Gödel不完备性定理：任何足够强大的形式系统都包含不可判定的命题。

## 实际应用

### 编程与类型系统

集合对应于编程中的类型。一个类型可能值的集合是该类型的外延。从类型A到类型B的函数将A的每个值指派给B的一个值。

集合运算在编程中随处可见：
- 数组去重（转换为集合）
- 访问控制检查成员资格
- 缓存失效涉及集合差（什么改变了？）

**双射特别重要**：它们保证数据变换可逆。序列化/反序列化应该形成双射；加密/解密必须如此。

### 数据库

关系数据库直接建立在集合论之上。数据库表本质上是一个关系——元组的集合。SQL查询执行集合运算：
- `UNION`（并集）
- `INTERSECT`（交集）
- `EXCEPT`（差集）
- `JOIN`（与笛卡尔积相关）

数据库的函数依赖实际上就是属性集之间的函数。规范化理论——如何组织模式避免冗余——是应用的集合论。

### 证明技巧

集合论提供了贯穿整个数学和计算机科学的证明技巧：

**通过互相包含证明相等**：证明 $A = B$，先证 $A \subseteq B$，再证 $B \subseteq A$。

**对角化论证**：Cantor的方法被用于证明停机问题不可判定，证明某些语言不是正则的，建立计算复杂性结果。

**双射对应**：建立计数结果——两个集合元素数量相同，如果我们能找到双射。

## 总结

集合、关系与函数构成数学的语法基础。从"对象汇集"这个几乎平凡的概念出发，我们能构建整座数学大厦。

从集合出发，我们构建**关系**来捕捉连接。等价关系划分集合；序关系组织层级。**函数**是特殊的关系——每个输入恰好决定一个输出。它们的性质（单射、满射、双射）决定了支持哪些运算。

**基数**将"大小"的直觉延伸到无穷，揭示了无穷有不同大小。Cantor的对角线论证产生了无尽的无穷层级。

朴素的集合概念导致悖论，**公理化集合论**仔细避免了这些。但即使ZFC也留下不可判定的问题，提醒我们数学真理可能超越任何公理系统。

这些基础性材料不仅是哲学脚手架，还极其实用。数据库实现集合运算。类型系统反映集合论概念。对角化论证确立了计算机科学的根本限制。

理解集合、关系与函数，就是理解所有数学都可以表达的共同语言。

## 延伸阅读

**入门：**
- **《朴素集合论》，Paul Halmos** ——优雅清晰的严格导论。"朴素"指非形式化呈现，而非数学内容。
- **《经典集合论》，Derek Goldrei** ——从公理开始仔细构建，适合认真的自学。

**深入：**
- **《集合论：独立性证明导论》，Kenneth Kunen** ——标准研究生教材，涵盖ZFC和独立性证明。

**概念视角：**
- **《无穷与心智》，Rudy Rucker** ——关于无穷的哲学与数学的通俗探索。
- **《科学中的范畴论》，David Spivak** ——集合论基础的范畴论替代方案。

---

*本主题建立在《逻辑：有效推理的法则》的基础上，为《数系：从计数到复数》（用集合论构造数）、《离散数学》和《博弈论：战略互动的数学》提供基础。*
